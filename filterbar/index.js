const positionData=require('position.js')Component({properties:{mode:{type:String,value:''},top:{type:String,value:''}},data:{twoStage:false,radio:false,sort:false,multi:false,twoStageDataLeft:{},radioData:{},sortData:{},multiData:{},twoStageDataRight:[],twoStageSelectedLeft:{},twoStageSelectedRight:'',radioSelected:'0',sortSelected:'0',multiSelected:[],selectedArray:[]},attached(){if(this.properties.mode==='position'){this.setData({twoStageDataLeft:positionData.twoStageDataLeft,radioData:positionData.radioData,sortData:positionData.sortData,multiData:positionData.multiData})}},methods:{onTwoStageActive:function(e){this.setData({twoStage:!this.data.twoStage,radio:false,sort:false,multi:false})},onRadioActive:function(e){this.setData({twoStage:false,radio:!this.data.radio,sort:false,multi:false})},onSortActive:function(e){this.setData({twoStage:false,radio:false,sort:!this.data.sort,multi:false})},onMultiActive:function(e){this.setData({twoStage:false,radio:false,sort:false,multi:!this.data.multi})},addUnique2Array:function(array,args){const _args=args.target?args.target.dataset:args const value=_args.group.value+':'+_args.item.value const label=_args.group.label+':'+_args.item.label let flag=false for(let i=0;i<array.length;i++){const group=value.split(':')[0]const arrayGroup=array[i].value.split(':')[0]if(arrayGroup===group){array[i].value=value array[i].label=label flag=true}}if(!flag){array.push({value:value,label:label})}},onTwoStageLeft:function(e){const selectedItemValue=e.target.dataset.item.value const selectedItemLabel=e.target.dataset.item.label const rightData=e.target.dataset.item.children this.setData({twoStageDataRight:rightData?rightData:'',twoStageSelectedLeft:{value:selectedItemValue,label:selectedItemLabel},twoStageSelectedRight:'',})if(rightData==null||rightData.length==0){this.closeFilter()this.addUnique2Array(this.data.selectedArray,e)this.triggerEvent('confirm',{selectedArray:this.data.selectedArray})}},onTwoStageRight:function(e){const selectedGroupValue=e.target.dataset.group.value const selectedGroupLabel=e.target.dataset.group.label const selectedItemValue=e.target.dataset.item.value const selectedItemLabel=e.target.dataset.item.label this.closeFilter()this.setData({twoStageSelectedRight:selectedItemValue})this.addUnique2Array(this.data.selectedArray,{group:{value:selectedGroupValue,label:selectedGroupLabel},item:{value:this.data.twoStageSelectedLeft.value+':'+selectedItemValue,label:this.data.twoStageSelectedLeft.label+':'+selectedItemLabel}})this.triggerEvent('confirm',{selectedArray:this.data.selectedArray})},onRadio:function(e){this.closeFilter()this.setData({radioSelected:e.target.dataset.item.value})this.addUnique2Array(this.data.selectedArray,e)this.triggerEvent('confirm',{selectedArray:this.data.selectedArray})},onSort:function(e){this.closeFilter()this.setData({sortSelected:e.target.dataset.item.value})this.addUnique2Array(this.data.selectedArray,e)this.triggerEvent('confirm',{selectedArray:this.data.selectedArray})},onMultiChange:function(e){this.addUnique2Array(this.data.multiSelected,{group:{value:e.target.dataset.group.value,label:e.target.dataset.group.label},item:{value:e.target.dataset.item.value,label:e.target.dataset.item.label}})this.setData({multiSelected:this.data.multiSelected})this.addUnique2Array(this.data.selectedArray,e)this.triggerEvent('multiChange',{selectedArray:this.data.selectedArray})},onMultiReset:function(){},onMultiConfirm:function(){this.closeFilter()this.triggerEvent('confirm',{selectedArray:this.data.selectedArray})},closeFilter:function(){this.setData({twoStage:false,radio:false,sort:false,multi:false,})},}})